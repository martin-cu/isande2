<div class="container-fluid">
    <div class="d-sm-flex justify-content-between align-items-center mb-4">
        <h3 class="text-dark mb-0">{{view}} Dashboard</h3>
    </div>
    <div class="row">
        {{#compareTwoValues this.view 'Sales' operator='==='}}
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-primary py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span>Earnings (monthly)</span></div>
                            <div class="text-dark font-weight-bold h5 mb-0"><span>Php {{netMonth}}</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-calendar fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-success py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-success font-weight-bold text-xs mb-1"><span>Earnings (annual)</span></div>
                            <div class="text-dark font-weight-bold h5 mb-0"><span>Php {{netYear}}</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        {{/compareTwoValues}}
        {{#compareTwoValues this.view 'Purchasing' operator='==='}}
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-primary py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span>MONTHLY ORDERED BAGS ({{orderedBags.[0].name}})</span></div>
                            <div class="text-dark font-weight-bold h5 mb-0"><span>{{orderedBags.[0].total_orders}} bags</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-calendar fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-success py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-success font-weight-bold text-xs mb-1"><span>???</span></div>
                            <div class="text-dark font-weight-bold h5 mb-0"><span></span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        {{/compareTwoValues}}

        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-info py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-info font-weight-bold text-xs mb-1"><span>Tasks</span></div>
                            <div class="row no-gutters align-items-center">
                                <div class="col-auto">
                                    <div class="text-dark font-weight-bold h5 mb-0 mr-3"><span>{{taskProgress}}</span></div>
                                </div>
                                <div class="col">
                                    <div class="progress progress-sm">
                                        <div class="progress-bar bg-info" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: {{taskProgress}}"><span class="sr-only">{{taskProgress}}</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-auto"><i class="fas fa-clipboard-list fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-warning py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-warning font-weight-bold text-xs mb-1"><span>Pending Requests</span></div>
                            <div class="text-dark font-weight-bold h5 mb-0"><span>{{pendingTasks}}</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-comments fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {{#compareTwoValues this.view 'Purchasing' operator='==='}}
    <div class="row">
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-primary py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span>MONTHLY ORDERED BAGS ({{orderedBags.[1].name}})</span></div>
                            <div class="text-dark font-weight-bold h5 mb-0"><span> {{orderedBags.[1].total_orders}} bags</span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-calendar fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-xl-3 mb-4">
            <div class="card shadow border-left-success py-2">
                <div class="card-body">
                    <div class="row align-items-center no-gutters">
                        <div class="col mr-2">
                            <div class="text-uppercase text-success font-weight-bold text-xs mb-1"><span>???</span></div>
                            <div class="text-dark font-weight-bold h5 mb-0"><span></span></div>
                        </div>
                        <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {{/compareTwoValues}}

    <div class="row">
        <div class="col-lg-7 col-xl-8">
            <div class="card shadow mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h6 class="text-primary font-weight-bold m-0">
                        {{#compareTwoValues this.view 'Logistics' operator='!='}}
                        Overview {{recent_data}}
                        {{/compareTwoValues}}

                        {{#compareTwoValues this.view 'Logistics' operator='==='}}
                        Perfect Order Accuracy
                        {{/compareTwoValues}}
                    </h6>
                </div>
                <div class="card-body">
                    <div class="chart-area">
                        {{#compareTwoValues this.view 'Logistics' operator='!='}}
                        {{#if monthlyEarnings}}
                        <canvas id="overviewSales" style="max-height: 100%; max-width: 100%;"></canvas>
                        {{else}}
                        <h6 class="text-center align-middle chart-no-data">No data to show</h6>
                        {{/if}}
                        {{/compareTwoValues}}

                        {{#compareTwoValues this.view 'Logistics' operator='==='}}
                        {{#if perfectOrderRate}}
                        <canvas id="overviewSales" style="max-height: 100%; max-width: 100%;"></canvas>
                        {{else}}
                        <h6 class="text-center align-middle chart-no-data">No data to show</h6>
                        {{/if}}
                        {{/compareTwoValues}}
                    </div>
                </div>

            </div>
        </div>
        <div class="col-lg-5 col-xl-4">
            <div class="card shadow mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h6 class="text-primary font-weight-bold m-0">
                        {{#compareTwoValues this.view 'Logistics' operator='!='}}
                        Recent {{recent_data}}
                        {{/compareTwoValues}}

                        {{#compareTwoValues this.view 'Logistics' operator='==='}}
                        Pending Deliveries
                        {{/compareTwoValues}}
                    </h6>
                </div>
                <div class="card-body" style="padding: 10px;">
                    {{#compareTwoValues this.view 'Logistics' operator='!='}}
                    <div class="text-center small mt-4" style="margin: 0px;margin-top: 0px;"><span class="mr-2">&nbsp;<i class="fa fa-circle" style="color: rgb(224,112,39);"></i>&nbsp;Pending</span><span class="mr-2"><i class="fas fa-circle text-info"></i>&nbsp;Processing</span><span class="mr-2"><i class="fas fa-circle text-success"></i>&nbsp;Complete</span></div>
                    {{/compareTwoValues}}

                    {{#compareTwoValues this.view 'Logistics' operator='==='}}
                    <div class="d-block d-xl-flex mt-2 justify-content-xl-center align-items-xl-center" style="margin-top: -10px;"><i class="fa fa-circle d-xl-flex" style="color: rgb(224,145,52);"></i><span class="d-xl-flex align-items-xl-center" style="font-size: 14px;color: rgb(3,52,97);margin-left: 5px;">Sales</span><i class="fa fa-circle d-xl-flex" style="color: rgb(54,185,204);margin-left: 10px;"></i><span class="d-xl-flex align-items-xl-center" style="font-size: 14px;color: rgb(3,52,97);margin-left: 5px;">Purchase</span></div>
                    {{/compareTwoValues}}
                    <div class="table-responsive" style="margin-top: 10px;">
                        <table class="table">
                            <thead>
                                <tr></tr>
                            </thead>
                            <tbody>
                                {{#compareTwoValues this.view 'Sales' operator='==='}}
                                {{#each recentOrders}}
                                    <tr>
                                        <td style="padding: 5px;">
                                            <div href="/view_sales_details/{{this.delivery_receipt}}" class="text-center {{#compareTwoValues this.order_status 'Pending' operator='==='}}Pending{{/compareTwoValues}}{{#compareTwoValues this.order_status 'Completed' operator='==='}}Completed{{/compareTwoValues}}{{#compareTwoValues this.order_status 'Processing' operator='==='}}Processing{{/compareTwoValues}} ">
                                                <p class="text-center status-data">{{this.customer_name}} ({{this.formattedDate}})</p>
                                                <p class="text-center status-data" style="font-size: 12px;">{{this.product_name}} - {{this.qty}} bags</p>
                                            </div>
                                        </td>
                                    </tr>
                                {{/each}}
                                {{/compareTwoValues}}

                                {{#compareTwoValues this.view 'Purchasing' operator='==='}}
                                {{#each recentOrders}}
                                <tr>
                                    <td style="padding: 5px;">
                                        <div href="/view_purchase_details/{{this.supplier_lo}}" class="text-center {{#compareTwoValues this.status 'Pending' operator='==='}}Pending{{/compareTwoValues}}{{#compareTwoValues this.status 'Completed' operator='==='}}Completed{{/compareTwoValues}}{{#compareTwoValues this.status 'Processing' operator='==='}}Processing{{/compareTwoValues}} ">
                                            <p class="text-center status-data">LO {{this.supplier_lo}} ({{this.formattedDate}})</p>
                                            <p class="text-center status-data" style="font-size: 12px;">{{this.product_name}} - {{this.qty}} bags</p>
                                        </div>
                                    </td>
                                </tr>
                                {{/each}}
                                {{/compareTwoValues}}

                                {{#compareTwoValues this.view 'Logistics' operator='==='}}
                                {{#each pendingDeliveries}}
                                <tr>
                                    <td style="padding: 5px;">
                                        <div href="/view_purchase_details/{{this.supplier_lo}}" class="text-center {{#compareTwoValues this.order_type 'Sell-in' operator='==='}}Pending{{/compareTwoValues}}{{#compareTwoValues this.order_type 'Sell-out' operator='==='}}Pending{{/compareTwoValues}}{{#compareTwoValues this.order_type 'Restock' operator='==='}}Processing{{/compareTwoValues}}">
                                            <p class="text-center status-data"> 
                                            {{#compareTwoValues this.order_type 'Sell-in' operator='==='}}
                                            {{this.customer_name}}
                                            {{/compareTwoValues}}

                                            {{#compareTwoValues this.order_type 'Sell-out' operator='==='}}
                                            {{this.customer_name}}
                                            {{/compareTwoValues}}

                                            {{#compareTwoValues this.order_type 'Restock' operator='==='}}
                                            {{{this.order_type}}}
                                            {{/compareTwoValues}}
                                            </p>
                                            
                                            <p class="text-center status-data" style="font-size: 12px;">
                                            {{#compareTwoValues this.order_type 'Sell-in' operator='==='}}
                                            DR {{this.delivery_receipt}}
                                            {{/compareTwoValues}}

                                            {{#compareTwoValues this.order_type 'Sell-out' operator='==='}}
                                            DR {{this.delivery_receipt}}
                                            {{/compareTwoValues}}

                                            {{#compareTwoValues this.order_type 'Restock' operator='==='}}
                                            LO {{this.supplier_lo}}
                                            {{/compareTwoValues}}
                                            </p>
                                        </div>
                                    </td>
                                </tr>
                                {{/each}}
                                {{/compareTwoValues}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div>
                
            </div>
        </div>
    </div>
    <div class="row">
        {{#compareTwoValues this.view 'Sales' operator='==='}}
        <div class="col-lg-6 mb-4">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="text-primary font-weight-bold m-0">Overdue Unpaid Orders</h6>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th class="text-nowrap">Customer</th>
                                    <th class="text-nowrap text-right">Amount Due</th>
                                    <th class="text-center" data-toggle="tooltip" data-bs-tooltip="" title="DD/MM/YYYY">Due Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each overDueOrders}}
                                    <tr>
                                        <td>{{this.customer_name}}</td>
                                        <td class="text-right">Php {{this.amt_due}}</td>
                                        <td class="text-nowrap text-center">{{this.due_date }}<i class="fa fa-warning" data-toggle="tooltip" data-bs-tooltip="" style="color: rgb(255,15,0);padding: 5px;border-style: none;" title="Overdue "></i></td>
                                    </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        {{/compareTwoValues}}

        {{#compareTwoValues this.view 'Purchasing' operator='==='}}
        <div class="col-lg-6 mb-4">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="text-primary font-weight-bold m-0">Current Inventory</h6>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr class="text-center">
                                    <th></th>
                                    <th>Product</th>
                                    <th class="text-left">Current Stock</th>
                                    <th class="text-left">Recommended</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each recommendInventory}}
                                <tr>
                                    <td class="justify-content-center"><img style="width:50px;height:60px;" src="{{#compareTwoValues this.product_name 'FCC' operator='==='}}assets/img/546dh-2ry2j-1568109877.jpg{{/compareTwoValues}}{{#compareTwoValues this.product_name 'RCC' operator='==='}}assets/img/lafarge-republic-portland-plus-40kg.jpg{{/compareTwoValues}}">
                                    </td>
                                    <td class="text-center align-middle">{{this.product_name}}</td>
                                    <td class="text-left align-middle">{{this.current_stock}} bags</td>
                                    <td class="text-left align-middle">{{this.recommended}} bags</td>
                                    <td class="text-center align-middle">
                                        <button class="btn btn-primary" href="/create_purchase">Replenish</button>
                                    </td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        {{/compareTwoValues}}

        {{#compareTwoValues this.view 'Logistics' operator='==='}}
        <div class="col-lg-6 mb-4">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 class="text-primary font-weight-bold m-0">Deliveries by Destination</h6>
                </div>
                <div class="card-body">
                    <div class="chart-area">
                        {{#if monthlyByDestination}}
                        <canvas id="deliveryByDestination" style="max-height: 100%; max-width: 100%;"></canvas>
                        {{else}}
                        <h6 class="text-center align-middle chart-no-data">No data to show</h6>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
        {{/compareTwoValues}}

        <div class="col">
            <div class="card shadow mb-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h6 class="text-primary font-weight-bold m-0">To-do list</h6>
                    <div class="dropdown no-arrow"><button class="btn btn-link btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false" type="button"><i class="fas fa-ellipsis-v text-gray-400"></i></button>
                        <div class="dropdown-menu shadow dropdown-menu-right animated--fade-in">
                            <p class="text-center dropdown-header">TO-do list</p><a class="btn btn-primary btn-block btn-lg text-left" role="button" data-toggle="modal" href="#AddTask" style="font-size: 13.6px;background: rgb(255,255,255);color: rgb(34,39,41);">Add task</a>
                        </div>
                    </div>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <div class="row align-items-center no-gutters">
                            <div class="col mr-2">
                                <h6 class="mb-0"><strong>Lunch meeting</strong></h6><span class="text-xs">10:30 AM</span>
                            </div>
                            <div class="col-auto">
                                <div class="custom-control custom-checkbox"><input class="custom-control-input" type="checkbox" id="formCheck-1"><label class="custom-control-label" for="formCheck-1"></label></div>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row align-items-center no-gutters">
                            <div class="col mr-2">
                                <h6 class="mb-0"><strong>Go to bank</strong></h6><span class="text-xs">11:30 AM</span>
                            </div>
                            <div class="col-auto">
                                <div class="custom-control custom-checkbox"><input class="custom-control-input" type="checkbox" id="formCheck-2"><label class="custom-control-label" for="formCheck-2"></label></div>
                            </div>
                        </div>
                    </li>
                    <li class="list-group-item">
                        <div class="row align-items-center no-gutters">
                            <div class="col mr-2">
                                <h6 class="mb-0"><strong>Call ABC Hardware</strong></h6><span class="text-xs">12:30 AM</span>
                            </div>
                            <div class="col-auto">
                                <div class="custom-control custom-checkbox"><input class="custom-control-input" type="checkbox" id="formCheck-3"><label class="custom-control-label" for="formCheck-3"></label></div>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.bundle.js"></script>
<script src="../assets/js/chartFormatter.js"></script>
<script type="text/javascript">
    var view = '{{role}}';
    {{#compareTwoValues this.view 'Sales' operator='==='}}
    {{#if monthlyEarnings}}
    var chartData = {{{monthlyEarnings}}};
    createAreaChart({{{monthlyEarnings}}});
    {{/if}}
    {{/compareTwoValues}}

    {{#compareTwoValues this.view 'Purchasing' operator='==='}}
    {{#if monthlyEarnings}}
    var chartData = {{{monthlyEarnings}}};
    createBarChart({{{monthlyEarnings}}});
    {{/if}}
    {{/compareTwoValues}}

    {{#compareTwoValues this.view 'Logistics' operator='==='}}
    {{#if monthlyByDestination}}
    createPieChart({{{monthlyByDestination}}});
    {{/if}}
    var chartData = {{{perfectOrderRate}}};
    createAreaChart({{{perfectOrderRate}}});
    {{/compareTwoValues}}
</script>